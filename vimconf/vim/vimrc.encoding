
" 改行文字
set ffs=unix,dos,mac
" デフォルトエンコーディング
set encoding=utf-8
set termencoding=utf-8

" 文字コード関連 ---------------------------------------------------
" from ずんWiki http://www.kawaz.jp/pukiwiki/?vim#content_1_7
" 文字コードの自動認識
" if &encoding !=# 'utf-8'
  " set encoding=japan
  " set fileencoding=japan
" endif
" if has('iconv')
  " let s:enc_euc = 'euc-jp'
  " let s:enc_jis = 'iso-2022-jp'
  " " iconvがeucJP-msに対応しているかをチェック
  " if iconv("\x87\x64\x87\x6a", 'cp932', 'eucjp-ms') ==# "\xad\xc5\xad\xcb"
	" let s:enc_euc = 'eucjp-ms'
	" let s:enc_jis = 'iso-2022-jp-3'
  " " iconvがJISX0213に対応しているかをチェック
  " elseif iconv("\x87\x64\x87\x6a", 'cp932', 'euc-jisx0213') ==# "\xad\xc5\xad\xcb"
	" let s:enc_euc = 'euc-jisx0213'
	" let s:enc_jis = 'iso-2022-jp-3'
  " endif
  " " fileencodingsを構築
  " if &encoding ==# 'utf-8'
	" let s:fileencodings_default = &fileencodings
	" let &fileencodings = s:enc_jis .','. s:enc_euc .',cp932'
	" let &fileencodings = &fileencodings .','. s:fileencodings_default
	" unlet s:fileencodings_default
  " else
	" let &fileencodings = &fileencodings .','. s:enc_jis
	" set fileencodings+=utf-8,ucs-2le,ucs-2
	" if &encoding =~# '^\(euc-jp\|euc-jisx0213\|eucjp-ms\)$'
	  " set fileencodings+=cp932
	  " set fileencodings-=euc-jp
	  " set fileencodings-=euc-jisx0213
	  " set fileencodings-=eucjp-ms
	  " let &encoding = s:enc_euc
	  " let &fileencoding = s:enc_euc
	" else
	  " let &fileencodings = &fileencodings .','. s:enc_euc
	" endif
  " endif
" " 定数を処分
  " unlet s:enc_euc
  " unlet s:enc_jis
" endif
" 日本語を含まない場合は fileencoding に encoding を使うようにする
if has('autocmd')
  function! AU_ReCheck_FENC()
	if &fileencoding =~# 'iso-2022-jp' && search("[^\x01-\x7e]", 'n') == 0
	  let &fileencoding=&encoding
	endif
  endfunction
  autocmd BufReadPost * call AU_ReCheck_FENC()
endif
" 改行コードの自動認識
set fileformats=unix,dos,mac
" □とか○の文字があってもカーソル位置がずれないようにする
if exists('&ambiwidth')
  set ambiwidth=double
endif

" cvsの時は文字コードをeuc-jpに設定
autocmd FileType cvs :set fileencoding=euc-jp
" 以下のファイルの時は文字コードをutf-8に設定
autocmd FileType svn :set fileencoding=utf-8
autocmd FileType js :set fileencoding=utf-8
autocmd FileType css :set fileencoding=utf-8
autocmd FileType html :set fileencoding=utf-8
autocmd FileType xml :set fileencoding=utf-8
autocmd FileType java :set fileencoding=utf-8
autocmd FileType scala :set fileencoding=utf-8
autocmd FileType sh :set fileencoding=utf-8
autocmd FileType python :set fileencoding=utf-8
autocmd FileType conf :set fileencoding=utf-8

" ワイルドカードで表示するときに優先度を低くする拡張子
set suffixes=.bak,~,.swp,.o,.info,.aux,.log,.dvi,.bbl,.blg,.brf,.cb,.ind,.idx,.ilg,.inx,.out,.toc

" 指定文字コードで強制的にファイルを開く
command! Cp932 edit ++enc=cp932
command! Eucjp edit ++enc=euc-jp
command! Iso2022jp edit ++enc=iso-2022-jp
command! Utf8 edit ++enc=utf-8
command! Jis Iso2022jp
command! Sjis Cp932
